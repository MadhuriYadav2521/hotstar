<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disney + Hotstar - watch TV Shows</title>
    <link rel="icon" type="image/x-icon" href="./img/favicon.png">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="./responsive.css">
    <script src="https://kit.fontawesome.com/8cfedbae53.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
</head>

<body>
    <div class="screen">
        <div class="cart-section">
            <div class="nav-wrapper">
                <div class="logo-and-subscribe">
                    <div class="logo">
                        <img src="https://img.hotstar.com/image/upload/v1656431456/web-images/logo-d-plus.svg" alt="">
                    </div>
                    <div class="home-subscribe">
                        <a href="">subscribe</a>
                        <i class="fa-solid fa-angle-right"></i>
                    </div>
                </div>
                <div class="nav-menu">
                    <a class="nav-link" href="./signup.html">
                        <i class="fa-regular fa-user"></i>
                        <span id="switch">my space</span>
                    </a>
                    <a class="nav-link">
                        <i class="fa-solid fa-magnifying-glass"></i>
                        <span>search</span>
                    </a>
                    <a class="nav-link">
                        <i class="fa-solid fa-house"></i>
                        <span>home</span>
                    </a>
                    <a class="nav-link">
                        <i class="fa-solid fa-tv"></i>
                        <span>TV</span>
                    </a>
                    <a class="nav-link">
                        <i class="fa-solid fa-film"></i>
                        <span>movies</span>
                    </a>
                    <a class="nav-link">
                        <i class="fa-solid fa-baseball"></i>
                        <span>sports</span>
                    </a>
                    <a class="nav-link" id="logout">

                    </a>
                </div>
            </div>
            <div class="main-content">
                <div class="cart-container">
                    <div class="cart--title">your shopping cart</div>
                    <div class="cart-inner-container">
                        <div class="left-cart" id="finalcart">
                            <div class="cart-product">
                                <div class="cart-product-img" id="productImage">
                                    <!-- <img src="https://img1.hotstarext.com/image/upload/f_auto,q_90,w_256/sources/r1/cms/prod/old_images/vertical/MOVIE/3314/1770003314/1770003314-v" alt=""> -->
                                </div>
                                <div class="cart-product-info">
                                    <div class="product-name"></div>
                                    <div class="price-section">
                                        <span class="price"></span>
                                        <span class="del-price"><del>₹ 999</del> </span>
                                        <div class="off-amt">49% off</div>
                                    </div>
                                    <div class="remove-and-delete">
                                        <a href="" class="remove-from-cart">
                                            <i class="fa-regular fa-trash-can"></i>
                                            <p>remove from cart</p>
                                        </a>
                                        <a href="" class="c-add-to-wishlist">
                                            <i class="fa-regular fa-heart"></i>
                                            <p>add to wishlist</p>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="right-cart">
                            <div class="price-details-title">price details</div>
                            <div class="price-deatails-content">
                                <div class="p-qty">
                                    <p>price(<span id="count"></span> items)</p>
                                    <p id="totalPrice"></p>
                                </div>
                                <div class="c-discount">
                                    <p>discount</p>
                                    <p>-₹ 200</p>
                                </div>
                                <div class="c-total-amt">
                                    <p>total Amount</p>
                                    <p id="finalPrice"></p>
                                </div>
                                <button onclick="window.location.href='./index.html'">buy now</button>
                            </div>
                            <div class="price-d-footer">
                                You will save ₹ 200 on this order
                            </div>
                        </div>
                    </div>



                </div>


                <div class="footer">

                    <div class="first-footer">
                        <div class="footer-menus">
                            <h4 class="footer-link-head">company</h4>
                            <div class="company-links">
                                <a href="">about us</a>
                                <a href="">careers</a>
                            </div>
                        </div>

                        <div class="footer-menus-lang">
                            <h4 class="footer-link-head">view website in</h4>
                            <a href="">english</a>
                        </div>

                        <div class="footer-menus">
                            <h4 class="footer-link-head">need help</h4>
                            <div class="h-help">
                                <a href="">visit help center</a>
                                <a href="">share feedback</a>
                            </div>
                        </div>

                        <div class="connect-w-us">
                            <h4 class="footer-link-head">connect with us</h4>
                            <div class="footer-icons">
                                <a href=""><span><i class="fa-brands fa-facebook-f"></i></span></a>
                                <a href=""><span><i class="fa-brands fa-twitter"></i></span></a>
                            </div>

                        </div>
                    </div>

                    <div class="second-footer">
                        <div class="t-conditions">
                            <span>© 2023 STAR. All Rights Reserved.</span>
                            <span>
                                <a href="">terms of use</a>
                                <a href="">privacy policy</a>
                                <a href="">FAQ</a>
                            </span>

                        </div>

                        <div class="app-images-container">
                            <div class="playstore-img">
                                <img src="https://img1.hotstarext.com/image/upload/f_auto,q_90,w_256/v1661346101/google-playstore"
                                    alt="">
                            </div>

                            <div class="appstore-img">
                                <img src="https://img1.hotstarext.com/image/upload/f_auto,q_90,w_256/v1661346071/ios-appstore"
                                    alt="">
                            </div>

                        </div>
                    </div>



                </div>
            </div>
        </div>
    </div>


    <script>
        window.onload = function () {
            // alert("working")
            var currentUser = JSON.parse(localStorage.getItem("hotstarCurrentUser"))
            // console.log(currentUser,"currentUser");
            if (!!currentUser) {
                // alert(currentUser.namee)
                var logoutDiv = document.getElementById("logout");
                var divFromHtml = document.getElementById("switch");
                // console.log(divFromHtml,"divFromHtml");
                // var h1 = document.createElement("h1");
                // h1.innerText = "madhuri"
                // divFromHtml.append(h1)
                var button = '<i class="fa-solid fa-arrow-right-from-bracket"></i> <span onclick="logout() ">Logout</span>'
                var name = `<p> ${currentUser.namee}</p>`;
                divFromHtml.innerHTML = name;
                logoutDiv.innerHTML = button;
            }
            // else{
            //     alert("current user absent")
            // }
            // var currentUser = JSON.parse(localStorage.getItem("tanishqCurrentUser"))
            var userData = JSON.parse(localStorage.getItem("hotstarUsers"))
            var divToAppendProductImage = document.getElementById("productImage")
            // var divToAppendProductName = document.getElementById("productName")
            // var divToAppendProductPrice = document.getElementById("productPrice")
            var divToAppendAllProducts = document.getElementById("finalcart")
            var divToShowCount = document.getElementById("count");
            var divToShowTotalPrice = document.getElementById("totalPrice");
            var divToShowFinalPrice = document.getElementById("finalPrice");

            var products;
            for (var i = 0; i < userData.length; i++) {
                if (currentUser.useremail == userData[i].useremail) {
                    products = userData[i].cartProducts;
                }
            }
            console.log(products, "products here");
            // var finalData = "";

            var finalProductImage = "";
            // var finalProductName = "";
            // var finalProductPrice = "";
            var finalProductCart = "";
            var count = 0;
            var sumArray = [];
            for (var i = 0; i < products.length; i++) {

                // finalData += `<div> <img src='${products[i].proImage}'/><br/>
                //             <h2>${products[i].proName}</h2><br/>
                //             <h3>${products[i].proPrice}</h3>`

                // finalProductImage += `<div> <img src='${products[i].proImage}'/></div>`;
                // finalProductName += `${products[i].proName}`;
                // finalProductPrice += `₹${products[i].proPrice}`;

                finalProductCart += `<div class="cart-product">
                                <div class="cart-product-img" id="productImage">
                                    <img src='${products[i].proImage}'/> </div>
                                <div class="cart-product-info">
                                    <div class="product-name">${products[i].proName}</div>
                                    <div class="price">${products[i].proGenre}</div><br/>
                                    <div class="price-section">
                                        <span class="price">₹ ${products[i].proPrice}</span>
                                        <span class="del-price"><del>₹ 999</del> </span>
                                        <div class="off-amt">49% off</div>
                                    </div>
                                    <div class="remove-and-delete">
                                        <a href="" class="remove-from-cart">
                                            <i class="fa-regular fa-trash-can"></i>
                                            <p>remove from cart</p>
                                        </a>
                                        <a href="" class="c-add-to-wishlist">
                                            <i class="fa-regular fa-heart"></i>
                                            <p>add to wishlist</p>
                                        </a>
                                    </div>
                                </div>
                            </div> `
                            
                            count++
                            sumArray.push(products[i].proPrice)
                            
            }
            
            var sum = 0;
            console.log(count);
            console.log(sumArray);
            for(var i=0; i<sumArray.length; i++){
                sum = sum + parseInt(sumArray[i])
                
            }
            console.log(sum);
            var finalPrice = sum - 200;
            console.log(finalPrice);
            // divToAppendProducts.innerHTML = finalData;

            divToAppendProductImage.innerHTML = finalProductImage;
            // divToAppendProductName.innerHTML = finalProductName;
            // divToAppendProductPrice.innerHTML = finalProductPrice;
            divToAppendAllProducts.innerHTML = finalProductCart;
            divToShowCount.innerHTML = count;
            divToShowTotalPrice.innerHTML =` ₹ ${sum}`
            divToShowFinalPrice.innerHTML = ` ₹ ${finalPrice}`
            
        }
        function logout() {
            alert("We will miss you..")
            localStorage.removeItem("hotstarCurrentUser");
            window.location.reload();
        }

    </script>



    <script src="./main.js"></script>
</body>

</html>